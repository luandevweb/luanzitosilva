<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Luanzito Silva</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background-color: #f4f6f8;
}

.topo-fixo {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000;
    background: white;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

header {
    background-color: #000000;
    color: white;
    padding: 14px;
    font-size: 20px;
    text-align: center;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

header button {
    padding: 6px 12px;
    font-size: 14px;
    background: #f44336;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

header button:hover {
    background: #d32f2f;
}

.progresso-container {
    padding: 8px 12px 12px;
    text-align: center;
}

.progresso-texto {
    text-align: center;
    font-size: 14px;
    margin-bottom: 6px;
}

.progresso {
    background: #ddd;
    border-radius: 10px;
    height: 16px;
    overflow: hidden;
    width: 80%;
    margin: 0 auto;
}

.progresso-barra {
    height: 100%;
    width: 0%;
    background-color: #F44336;
    transition: width 0.3s, background-color 0.3s;
}

main {
    display: flex;
    justify-content: center;
    padding: 20px;
    margin-top: 110px;
}

#container {
    width: 100%;
    max-width: 800px;
}

#filtroAssunto {
    width: 100%;
    padding: 10px;
    margin-bottom: 20px;
    font-size: 16px;
}

.questao {
    background: white;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.questao button {
    width: 100%;
    padding: 14px;
    margin: 10px 0;
    border-radius: 6px;
    border: 1px solid #ddd;
    background: #f9f9f9;
    cursor: pointer;
    text-align: left;
    font-size: 16px;
}

.questao button:disabled {
    cursor: default;
    opacity: 0.95;
}

#proxima {
    width: 100%;
    padding: 15px;
    font-size: 17px;
    border: none;
    border-radius: 6px;
    background-color: #0a66c2;
    color: white;
    cursor: pointer;
    display: none;
}

.resultado-final {
    background: white;
    padding: 25px;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

#baixarRelatorio {
    padding: 12px 20px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 15px;
    font-size: 16px;
}
</style>
</head>
<body>

<div class="topo-fixo">
    <header>
        LUANZITO SILVA
        <button onclick="reiniciarSimulado()">Reiniciar Quest√µes</button>
    </header>

    <div class="progresso-container">
        <input type="text" id="filtroAssunto" placeholder="Filtrar por quest√£o ou assunto...">
        <div class="progresso-texto" id="progressoTexto"></div>
        <div class="progresso">
            <div class="progresso-barra" id="barraProgresso"></div>
        </div>
    </div>
</div>

<main>
    <div id="container">
        <div id="listaQuestoes"></div>
        <button id="proxima" onclick="proximaPagina()">Pr√≥ximas quest√µes</button>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
// QUEST√ïES COM ASSUNTO
const questoes = [
  { pergunta: "Quantos n√∫meros de tr√™s algarismos distintos podemos formar com os algarismos : 1,2,3,4,5,6,7 e 8?", assunto:"Combinat√≥ria", alternativas: ["a) 336", "b) 672", "c) 240", "d) 1024","e) 540"], correta: 0 },
  { pergunta: "Num √¥nibus h√° 5 lugares. Duas pessoas entram no √¥nibus. De Quantas Maneiras diferentes elas podem sentar?", assunto:"Combinat√≥ria", alternativas: ["a) 10", "b) 20", "c) 30", "d) 40", "e) 50"], correta: 1 },
  { pergunta: "Disponho de cinco tipos de frutas e usarei 3 para fazer uma vitamina. A quantidade de possibilidades para fazer essa vitamina √©:", assunto:"Combinat√≥ria", alternativas: ["a) 5", "b) 8", "c) 10", "d) 15","e) 20"], correta: 2 },
  { pergunta: "Quantas comiss√µes de 4 elementos podemos formar com 20 alunos de uma turma?", assunto:"Combinat√≥ria", alternativas: ["a) 4845", "b) 2345", "c) 3485", "d) 4325","e) 4380"], correta: 0 },
  { pergunta: "(SECOM-PA/AOCP/2018) Define-se uma proposi√ß√£o como sendo um senten√ßa declarativa cujo conte√∫do poder√° ser considerado verdadeiro ou falso. Dessa forma, assinale a alternativa que identifica uma proposi√ß√£o.", assunto:"L√≥gica", alternativas: ["a) Feliz Anivers√°rio!", "b) Que dia √© hoje?", "c) Se Pedro levantar mais cedo, ent√£o ele chegar√° no hor√°rio combinado.", "d) Leia com mais frequ√™ncia.","e) A idade do jogador multiplicada por R$50,00 ser√° o valor do pr√™mio."], correta: 2 },
  { pergunta: "(IDAM/IBFC/2019) Considere as afirma√ß√µes sobre l√≥gica propositiva e sua an√°lise por meio de tabelas-verdade. Analise as afirmativas abaixo, d√™ valores Verdadeiro (V) ou Falso (F). <br><br> ( ) A conjun√ß√£o (e, ‚àß) entre duas proposi√ß√µes P e Q, s√≥ √© verdadeira se ambas forem verdadeiras. <br><br>( ) A disjun√ß√£o (ou, ‚à®) entre duas proposi√ß√µes P e Q, s√≥ √© verdadeira se ambas foremverdadeiras. <br><br> ( ) A disjun√ß√£o (ou, v) entre a nega√ß√£o de duas proposi√ß√µes falsas √© verdadeira. Assinale a alternativa que apresenta a sequ√™ncia correta de cima para baixo.", assunto:"L√≥gica", alternativas: ["a) V,F,V", "b) V,V,F", "c) F,F,V", "d) F,V,V"], correta: 0 },
  { pergunta: "Considere como verdadeira a proposi√ß√£o:<br><br>‚ÄúSolange √© loura e M√¥nica √© morena‚Äù. Considere agora as proposi√ß√µes: <br><br>I. Solange n√£o √© loura ou M√¥nica √© morena. <br><br>II. Se Solange √© loura, ent√£o M√¥nica n√£o √© morena.<br><br>III. Se M√¥nica n√£o √© morena, ent√£o Solange √© loura", assunto:"L√≥gica", alternativas: ["a) Apenas a proposi√ß√£o I.", "b) Apenas as porposi√ß√µes I e III.", "c) Apenas as proposi√ß√µes II e III.", "d) Todas as tr√™s.", "e) Nenhuma das respostas."], correta: 1 }
];

const questoesPorPagina = 5;
let paginaAtual = 0;
let totalRespondidas = 0;
let acertos = 0;

const listaQuestoes = document.getElementById("listaQuestoes");
const barraProgresso = document.getElementById("barraProgresso");
const progressoTexto = document.getElementById("progressoTexto");
const proxima = document.getElementById("proxima");
const filtroAssunto = document.getElementById("filtroAssunto");
const container = document.getElementById("container");

// ATUALIZAR PROGRESSO
function atualizarProgresso() {
    const pct = (totalRespondidas / questoes.length) * 100;
    barraProgresso.style.width = pct + "%";
    if (pct < 50) barraProgresso.style.backgroundColor = "#F44336";
    else if (pct < 70) barraProgresso.style.backgroundColor = "#FFEB3B";
    else barraProgresso.style.backgroundColor = "#4CAF50";

    progressoTexto.innerText = `Progresso: ${totalRespondidas} / ${questoes.length}`;
}

// CARREGAR QUEST√ïES COM FILTRO (PERGUNTA + ASSUNTO)
function carregarQuestoes() {
    listaQuestoes.innerHTML = "";
    proxima.style.display = "none";

    const filtro = filtroAssunto.value.toLowerCase();
    const filtradas = questoes.filter(q => 
        q.pergunta.toLowerCase().includes(filtro) || 
        q.assunto.toLowerCase().includes(filtro)
    );

    const inicio = paginaAtual * questoesPorPagina;
    const fim = inicio + questoesPorPagina;

    filtradas.slice(inicio, fim).forEach((q, index) => {
        const div = document.createElement("div");
        div.className = "questao";
        div.innerHTML = `
            <h3>Quest√£o ${inicio + index + 1} (${q.assunto})</h3>
            <p>${q.pergunta}</p>
            ${q.alternativas.map((alt, i) => `
                <button onclick="responder(${i}, ${q.correta}, this)">
                    ${alt}
                </button>
            `).join("")}
        `;
        listaQuestoes.appendChild(div);
    });
}

// RESPONDER QUEST√ÉO
function responder(escolhida, correta, botao) {
    botao.parentNode.querySelectorAll("button").forEach(b => b.disabled = true);

    if (escolhida === correta) {
        botao.style.background = "#4CAF50";
        acertos++;
    } else {
        botao.style.background = "#F44336";
    }

    totalRespondidas++;
    atualizarProgresso();

    const questoesNaPagina = listaQuestoes.querySelectorAll(".questao");
    const respondidasNaPagina = Array.from(questoesNaPagina).filter(q =>
        Array.from(q.querySelectorAll("button")).every(b => b.disabled)
    ).length;

    if (respondidasNaPagina === questoesNaPagina.length) {
        proxima.style.display = "block";
    }
}

// PR√ìXIMA P√ÅGINA
function proximaPagina() {
    paginaAtual++;
    const filtradas = questoes.filter(q => 
        q.pergunta.toLowerCase().includes(filtroAssunto.value.toLowerCase()) || 
        q.assunto.toLowerCase().includes(filtroAssunto.value.toLowerCase())
    );
    if (paginaAtual * questoesPorPagina < filtradas.length) {
        carregarQuestoes();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    } else {
        mostrarResultadoFinal();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}

// REINICIAR SIMULADO
function reiniciarSimulado() {
    if (confirm("Deseja realmente reiniciar o teste?")) {
        paginaAtual = 0;
        totalRespondidas = 0;
        acertos = 0;
        atualizarProgresso();
        carregarQuestoes();
        proxima.style.display = "none";
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}

// RESULTADO FINAL
function mostrarResultadoFinal() {
    const erros = totalRespondidas - acertos;
    container.innerHTML = `
        <div class="resultado-final">
            <h2>Resultado Final üéØ</h2>
            <p>Acertos: ${acertos}</p>
            <p>Erros: ${erros}</p>
            <canvas id="graficoPizza" width="400" height="400"></canvas>
            <button id="baixarRelatorio" onclick="baixarRelatorio()">Baixar Relat√≥rio PDF</button>
        </div>
    `;

    const ctx = document.getElementById('graficoPizza').getContext('2d');
    new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Acertos', 'Erros'],
            datasets: [{
                data: [acertos, erros],
                backgroundColor: ['#4CAF50', '#F44336']
            }]
        },
        options: { responsive: true }
    });
}

// GERAR RELAT√ìRIO PDF
async function baixarRelatorio() {
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF();
    const resultadoDiv = document.querySelector(".resultado-final");

    const canvas = await html2canvas(resultadoDiv);
    const imgData = canvas.toDataURL('image/png');

    const pdfWidth = pdf.internal.pageSize.getWidth();
    const pdfHeight = pdf.internal.pageSize.getHeight();

    pdf.addImage(imgData, 'PNG', 10, 10, pdfWidth-20, pdfHeight-20);
    pdf.save('Relatorio_Questoes.pdf');
}

// FILTRO QUEST√ïES
filtroAssunto.addEventListener("input", () => {
    paginaAtual = 0;
    carregarQuestoes();
});

atualizarProgresso();
carregarQuestoes();
</script>

</body>
</html>
