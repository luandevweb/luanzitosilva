<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Luanzito Silva</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background-color: #f4f6f8;
}

/* ===== TOPO FIXO ===== */
.topo-fixo {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000;
    background: white;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

header {
    background-color: #000;
    color: white;
    padding: 14px;
    font-size: 20px;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

header button {
    padding: 6px 12px;
    font-size: 14px;
    background: #f44336;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

/* ===== PROGRESSO CENTRALIZADO ===== */
.progresso-container {
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.progresso-texto {
    margin-bottom: 6px;
    font-weight: bold;
}

.progresso {
    width: 100%;
    max-width: 500px;
    background: #ddd;
    border-radius: 10px;
    height: 16px;
    overflow: hidden;
}

.progresso-barra {
    height: 100%;
    width: 0%;
    background-color: #F44336;
    transition: 0.3s;
}

/* ===== CONTE√öDO ===== */
main {
    display: flex;
    justify-content: center;
    padding: 20px;
    margin-top: 170px;
}

#container {
    width: 100%;
    max-width: 800px;
}

.filtro-box, .questao, .resultado-final {
    background: white;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.questao button {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border-radius: 6px;
    border: 1px solid #ddd;
    background: #f9f9f9;
    cursor: pointer;
    text-align: left;
}

#proxima {
    width: 100%;
    padding: 15px;
    font-size: 17px;
    border: none;
    border-radius: 6px;
    background-color: #0a66c2;
    color: white;
    cursor: pointer;
    display: none;
}

.assunto-estatistica {
    margin-top: 20px;
}

.assunto-estatistica h4 {
    margin-bottom: 6px;
}
</style>
</head>
<body>

<div class="topo-fixo">
<header>
LUANZITO SILVA
<button onclick="reiniciarSimulado()">Reiniciar</button>
</header>

<div class="progresso-container">
<div id="progressoTexto" class="progresso-texto"></div>
<div class="progresso">
<div class="progresso-barra" id="barraProgresso"></div>
</div>
</div>
</div>

<main>
<div id="container"></div>
</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>

/* ================= QUEST√ïES ================= */
const questoes = [
{ assunto:"An√°lise Combinat√≥ria", pergunta:"Quantos n√∫meros de tr√™s algarismos distintos podemos formar com 1,2,3,4,5,6,7 e 8?", alternativas:["a) 336","b) 672","c) 240","d) 1024","e) 540"], correta:0 },
{ assunto:"An√°lise Combinat√≥ria", pergunta:"Num √¥nibus h√° 5 lugares. Duas pessoas entram. De quantas maneiras podem sentar?", alternativas:["a) 10","b) 20","c) 30","d) 40","e) 50"], correta:1 },
{ assunto:"An√°lise Combinat√≥ria", pergunta:"Disponho de cinco tipos de frutas e usarei 3 para fazer uma vitamina.", alternativas:["a) 5","b) 8","c) 10","d) 15","e) 20"], correta:2 },
{ assunto:"An√°lise Combinat√≥ria", pergunta:"Quantas comiss√µes de 4 elementos podemos formar com 20 alunos?", alternativas:["a) 4845","b) 2345","c) 3485","d) 4325","e) 4380"], correta:0 },
{ assunto:"L√≥gica Proposicional", pergunta:"Assinale a alternativa que identifica uma proposi√ß√£o.", alternativas:["a) Feliz Anivers√°rio!","b) Que dia √© hoje?","c) Se Pedro levantar cedo, ent√£o chegar√° no hor√°rio.","d) Leia mais.","e) A idade multiplicada por 50 ser√° o pr√™mio."], correta:2 },
{ assunto:"Equival√™ncia L√≥gica", pergunta:"Se Jo√£o gosta de goiaba, ent√£o gosta de abacate. Equivalente √©:", alternativas:["a) Jo√£o n√£o gosta de goiaba ou gosta de abacate.","b) Se Jo√£o n√£o gosta de goiaba, ent√£o n√£o gosta de abacate.","c) Se Jo√£o gosta de abacate, ent√£o gosta de goiaba.","d) Jo√£o gosta de goiaba e n√£o gosta de abacate.","e) Jo√£o gosta de goiaba ou gosta de abacate."], correta:0 },
{ assunto:"Nega√ß√£o", pergunta:"Nega√ß√£o de: Renato viajou e n√£o telefonou.", alternativas:["a) Renato viajou e telefonou.","b) Renato n√£o viajou e n√£o telefonou.","c) Renato n√£o viajou ou telefonou.","d) Renato viajou ou n√£o telefonou.","e) Renato n√£o veio ou n√£o venceu."], correta:2 },
{ assunto:"Nega√ß√£o", pergunta:"Nega√ß√£o de: Se pratico esportes, ent√£o fico feliz.", alternativas:["a) Se n√£o pratico, ent√£o n√£o fico feliz.","b) Se n√£o pratico, ent√£o fico feliz.","c) Se pratico, ent√£o n√£o fico feliz.","d) Pratico esportes e n√£o fico feliz.","e) N√£o pratico e fico feliz."], correta:3 }
];

/* ================= VARI√ÅVEIS ================= */
let questoesFiltradas = [...questoes];
let paginaAtual = 0;
let totalRespondidas = 0;
let acertos = 0;
const questoesPorPagina = 5;

// Para estat√≠stica por assunto
let estatisticaAssunto = {};

/* ================= TELA INICIAL ================= */
function construirTelaInicial(){
document.getElementById("container").innerHTML = `
<div class="filtro-box">
<input type="text" id="buscaTexto" placeholder="Buscar palavra-chave..." style="width:100%; padding:10px; margin-bottom:10px;">
<select id="filtroAssunto" style="width:100%; padding:10px;">
<option value="todos">Todos os assuntos</option>
</select>
<button onclick="aplicarFiltro()" style="margin-top:10px; width:100%; padding:10px;">Aplicar Filtro</button>
</div>
<div id="listaQuestoes"></div>
<button id="proxima" onclick="proximaPagina()">Pr√≥ximas quest√µes</button>
`;

carregarAssuntos();
carregarQuestoes();
atualizarProgresso();
estatisticaAssunto = {};
}

/* ================= FUN√á√ïES ================= */
function carregarAssuntos(){
const assuntos=[...new Set(questoes.map(q=>q.assunto))];
const select=document.getElementById("filtroAssunto");
assuntos.forEach(a=>{
let op=document.createElement("option");
op.value=a;
op.textContent=a;
select.appendChild(op);
});
}

function aplicarFiltro(){
const texto=document.getElementById("buscaTexto").value.toLowerCase();
const assunto=document.getElementById("filtroAssunto").value;

questoesFiltradas=questoes.filter(q=>{
return (assunto==="todos"||q.assunto===assunto) && q.pergunta.toLowerCase().includes(texto);
});

paginaAtual=0;
totalRespondidas=0;
acertos=0;
estatisticaAssunto = {};

carregarQuestoes();
atualizarProgresso();
}

function carregarQuestoes(){
const lista=document.getElementById("listaQuestoes");
lista.innerHTML="";
document.getElementById("proxima").style.display="none";

const inicio=paginaAtual*questoesPorPagina;
const fim=inicio+questoesPorPagina;

questoesFiltradas.slice(inicio,fim).forEach((q,index)=>{
const div=document.createElement("div");
div.className="questao";

div.innerHTML=`
<h3>Quest√£o ${inicio+index+1}</h3>
<small><strong>Assunto:</strong> ${q.assunto}</small>
<p>${q.pergunta}</p>
${q.alternativas.map((alt,i)=>`
<button onclick="responder(${i},${q.correta},'${q.assunto}',this)">
${alt}
</button>
`).join("")}
`;

lista.appendChild(div);
});
}

function responder(escolhida,correta,assunto,botao){
botao.parentNode.querySelectorAll("button").forEach(b=>b.disabled=true);

if(!estatisticaAssunto[assunto]) estatisticaAssunto[assunto]={acertos:0,erros:0};

if(escolhida===correta){
botao.style.background="#c8f7c5";
acertos++;
estatisticaAssunto[assunto].acertos++;
}else{
botao.style.background="#f7c5c5";
estatisticaAssunto[assunto].erros++;
}

totalRespondidas++;
atualizarProgresso();

const totalPagina=document.querySelectorAll(".questao").length;
const respondidas=document.querySelectorAll(".questao button:disabled").length/5; // aproximado

if(respondidas===totalPagina){
document.getElementById("proxima").style.display="block";
}
}

function proximaPagina(){
paginaAtual++;
if(paginaAtual*questoesPorPagina<questoesFiltradas.length){
carregarQuestoes();
window.scrollTo({top:0,behavior:"smooth"});
}else{
mostrarResultadoFinal();
window.scrollTo({top:0,behavior:"smooth"});
}
}

function atualizarProgresso(){
const total=questoesFiltradas.length||1;
const pct=(totalRespondidas/total)*100;
document.getElementById("barraProgresso").style.width=pct+"%";
document.getElementById("progressoTexto").innerText=`Progresso: ${totalRespondidas} / ${questoesFiltradas.length}`;
}

function reiniciarSimulado(){
if(!confirm("Deseja reiniciar o teste?")) return;
paginaAtual=0;
totalRespondidas=0;
acertos=0;
questoesFiltradas=[...questoes];
estatisticaAssunto={};
construirTelaInicial();
window.scrollTo({top:0,behavior:"smooth"});
}

function mostrarResultadoFinal(){
const total=questoesFiltradas.length;
const erros=total-acertos;

let html=`
<div class="resultado-final">
<h2>Resultado Final üéØ</h2>
<p><strong>Total:</strong> ${total}</p>
<p style="color:#4CAF50;"><strong>Acertos:</strong> ${acertos}</p>
<p style="color:#F44336;"><strong>Erros:</strong> ${erros}</p>
<canvas id="graficoPizza"></canvas>
</div>
`;

html += `<div class="assunto-estatistica"><h3>Estat√≠sticas por Assunto</h3></div>`;
document.getElementById("container").innerHTML=html;

// Gr√°fico geral
new Chart(document.getElementById("graficoPizza"),{
type:"pie",
data:{
labels:["Acertos","Erros"],
datasets:[{data:[acertos,erros], backgroundColor:["#4CAF50","#F44336"]}]
},
options:{plugins:{legend:{position:"bottom"}}}
});

// Gr√°ficos por assunto
for(const [assunto, dados] of Object.entries(estatisticaAssunto)){
const canvas=document.createElement("canvas");
canvas.id="grafico-"+assunto.replace(/\s/g,"");
canvas.style.marginTop="20px";
document.getElementById("container").appendChild(canvas);

new Chart(canvas,{
type:"pie",
data:{
labels:["Acertos","Erros"],
datasets:[{data:[dados.acertos,dados.erros], backgroundColor:["#4CAF50","#F44336"]}]
},
options:{plugins:{title:{display:true,text:assunto}, legend:{position:"bottom"}}}
});
}

/* scroll para topo */
window.scrollTo({top:0,behavior:"smooth"});
}

/* Inicializa√ß√£o */
construirTelaInicial();

</script>
</body>
</html>
